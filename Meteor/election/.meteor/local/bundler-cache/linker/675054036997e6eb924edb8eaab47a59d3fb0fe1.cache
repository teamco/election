[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar _ = Package.underscore._;\nvar Template = Package.templating.Template;\nvar $ = Package.jquery.$;\nvar jQuery = Package.jquery.jQuery;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar Router = Package['iron:router'].Router;\nvar RouteController = Package['iron:router'].RouteController;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar Iron = Package['iron:core'].Iron;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar __coffeescriptShare;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                               //\n// packages/multiply_iron-router-progress/template.progress.js                                                   //\n//                                                                                                               //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                 //\n                                                                                                                 // 1\nTemplate.__checkName(\"__IronRouterProgress__\");                                                                  // 2\nTemplate[\"__IronRouterProgress__\"] = new Template(\"Template.__IronRouterProgress__\", (function() {               // 3\n  var view = this;                                                                                               // 4\n  return Blaze._TemplateWith(function() {                                                                        // 5\n    return {                                                                                                     // 6\n      template: Spacebars.call(view.lookup(\"template\")),                                                         // 7\n      data: Spacebars.call(view.lookup(\"data\"))                                                                  // 8\n    };                                                                                                           // 9\n  }, function() {                                                                                                // 10\n    return Spacebars.include(function() {                                                                        // 11\n      return Spacebars.call(Template.__dynamic);                                                                 // 12\n    });                                                                                                          // 13\n  });                                                                                                            // 14\n}));                                                                                                             // 15\n                                                                                                                 // 16\nTemplate.__checkName(\"__IronRouterProgressDefault__\");                                                           // 17\nTemplate[\"__IronRouterProgressDefault__\"] = new Template(\"Template.__IronRouterProgressDefault__\", (function() {\n  var view = this;                                                                                               // 19\n  return HTML.DIV({                                                                                              // 20\n    id: \"iron-router-progress\",                                                                                  // 21\n    \"class\": function() {                                                                                        // 22\n      return Spacebars.mustache(view.lookup(\"cssClass\"));                                                        // 23\n    },                                                                                                           // 24\n    style: function() {                                                                                          // 25\n      return Spacebars.mustache(view.lookup(\"cssStyle\"));                                                        // 26\n    }                                                                                                            // 27\n  });                                                                                                            // 28\n}));                                                                                                             // 29\n                                                                                                                 // 30\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                               //\n// packages/multiply_iron-router-progress/progress.coffee.js                                                     //\n//                                                                                                               //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                 //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar debug;                                                                                                       // 2\n                                                                                                                 //\nRouter.configure({                                                                                               // 2\n  progress: true,                                                                                                // 3\n  progressDebug: false,                                                                                          // 3\n  progressDelay: false,                                                                                          // 3\n  progressSpinner: true,                                                                                         // 3\n  progressTick: true                                                                                             // 3\n});                                                                                                              //\n                                                                                                                 //\ndebug = function() {                                                                                             // 2\n  if (Router.current().lookupOption('progressDebug')) {                                                          // 10\n    return console.log.apply(console, arguments);                                                                //\n  }                                                                                                              //\n};                                                                                                               // 10\n                                                                                                                 //\nTemplate.__IronRouterProgress__.created = function() {                                                           // 2\n  var self;                                                                                                      // 13\n  self = this;                                                                                                   // 13\n  this.ticker = false;                                                                                           // 13\n  this.delay = false;                                                                                            // 13\n  this.started = false;                                                                                          // 13\n  this.loading = new ReactiveVar(false);                                                                         // 13\n  this.spinner = new ReactiveVar(false);                                                                         // 13\n  this.done = new ReactiveVar(false);                                                                            // 13\n  this.percent = new ReactiveVar(false);                                                                         // 13\n  this.functions = {                                                                                             // 13\n    reset: function(element) {                                                                                   // 24\n      debug('Reset');                                                                                            // 25\n      self.functions.stop();                                                                                     // 25\n      self.loading.set(false);                                                                                   // 25\n      self.done.set(false);                                                                                      // 25\n      self.percent.set(0);                                                                                       // 25\n      self.started = false;                                                                                      // 25\n      if (element) {                                                                                             // 35\n        element.offsetWidth = element.offsetWidth;                                                               // 35\n      }                                                                                                          //\n      return self;                                                                                               //\n    },                                                                                                           //\n    start: function(element) {                                                                                   // 24\n      var delay;                                                                                                 // 40\n      debug('Start');                                                                                            // 40\n      self.functions.reset(element);                                                                             // 40\n      self.spinner.set(Router.current().lookupOption('progressSpinner') || false);                               // 40\n      self.loading.set(true);                                                                                    // 40\n      delay = Router.current().lookupOption('progressDelay');                                                    // 40\n      if (delay > 0) {                                                                                           // 52\n        debug('Delayed');                                                                                        // 53\n        self.delay = Meteor.setTimeout(function() {                                                              // 53\n          self.started = true;                                                                                   // 55\n          self.functions.progress();                                                                             // 55\n          return self.functions.tick();                                                                          //\n        }, delay);                                                                                               //\n      } else {                                                                                                   //\n        debug('Not delayed');                                                                                    // 60\n        self.started = true;                                                                                     // 60\n        self.functions.progress();                                                                               // 60\n        self.functions.tick();                                                                                   // 60\n      }                                                                                                          //\n      return self;                                                                                               //\n    },                                                                                                           //\n    progress: function(progress) {                                                                               // 24\n      var percent, percentNew;                                                                                   // 68\n      if (progress == null) {                                                                                    //\n        progress = false;                                                                                        //\n      }                                                                                                          //\n      debug('Progress');                                                                                         // 68\n      percent = self.percent.get();                                                                              // 68\n      percentNew = percent + (progress ? progress : (100 - percent) * (Math.random() * 0.45 + 0.05) | 0);        // 68\n      if (percentNew >= 100) {                                                                                   // 74\n        self.functions.done();                                                                                   // 75\n      } else {                                                                                                   //\n        self.percent.set(percentNew);                                                                            // 77\n        self.functions.tick();                                                                                   // 77\n      }                                                                                                          //\n      return self;                                                                                               //\n    },                                                                                                           //\n    tick: function() {                                                                                           // 24\n      debug('Tick');                                                                                             // 83\n      if (Router.current().lookupOption('progressTick')) {                                                       // 85\n        debug('starting new ticker');                                                                            // 86\n        if (self.ticker) {                                                                                       // 87\n          Meteor.clearTimeout(self.ticker);                                                                      // 88\n          self.ticker = false;                                                                                   // 88\n        }                                                                                                        //\n        self.ticker = Meteor.setTimeout(function() {                                                             // 86\n          self.ticker = false;                                                                                   // 92\n          return self.functions.progress();                                                                      //\n        }, Math.random() * 750 + 750);                                                                           //\n      } else {                                                                                                   //\n        debug('Not starting ticker');                                                                            // 96\n      }                                                                                                          //\n      return self;                                                                                               //\n    },                                                                                                           //\n    done: function() {                                                                                           // 24\n      debug('Done');                                                                                             // 101\n      self.functions.stop();                                                                                     // 101\n      if (!self.started) {                                                                                       // 105\n        self.functions.reset();                                                                                  // 106\n      } else {                                                                                                   //\n        _.defer(function() {                                                                                     // 108\n          return self.done.set(true);                                                                            //\n        });                                                                                                      //\n        self.loading.set(true);                                                                                  // 108\n        self.percent.set(100);                                                                                   // 108\n      }                                                                                                          //\n      return self;                                                                                               //\n    },                                                                                                           //\n    stop: function() {                                                                                           // 24\n      debug('Stop');                                                                                             // 115\n      if (self.ticker) {                                                                                         // 118\n        Meteor.clearTimeout(self.ticker);                                                                        // 119\n        self.ticker = false;                                                                                     // 119\n      }                                                                                                          //\n      if (self.delay) {                                                                                          // 121\n        Meteor.clearTimeout(self.delay);                                                                         // 122\n        self.delay = false;                                                                                      // 122\n      }                                                                                                          //\n      return self;                                                                                               //\n    }                                                                                                            //\n  };                                                                                                             //\n  Router.load(function() {                                                                                       // 13\n    var element;                                                                                                 // 128\n    debug('IR:load');                                                                                            // 128\n    element = self.find('*');                                                                                    // 128\n    self.functions.start(element);                                                                               // 128\n    this.next();                                                                                                 // 128\n    return this;                                                                                                 //\n  });                                                                                                            //\n  Router.unload(function() {                                                                                     // 13\n    debug('IR:unload');                                                                                          // 136\n    self.functions.reset();                                                                                      // 136\n    return this;                                                                                                 //\n  });                                                                                                            //\n  Router.onRun(function() {                                                                                      // 13\n    debug('IR:run');                                                                                             // 141\n    self.loading.set(true);                                                                                      // 141\n    this.next();                                                                                                 // 141\n    return this;                                                                                                 //\n  });                                                                                                            //\n  Router.onRerun(function() {                                                                                    // 13\n    debug('IR:re-run');                                                                                          // 147\n    this.next();                                                                                                 // 147\n    return this;                                                                                                 //\n  });                                                                                                            //\n  Router.onBeforeAction(function() {                                                                             // 13\n    debug('IR:before');                                                                                          // 152\n    if (this.ready()) {                                                                                          // 153\n      self.functions.done();                                                                                     // 154\n      self.functions.stop();                                                                                     // 154\n    } else {                                                                                                     //\n      self.functions.progress();                                                                                 // 157\n    }                                                                                                            //\n    this.next();                                                                                                 // 152\n    return this;                                                                                                 //\n  });                                                                                                            //\n  Router.onAfterAction(function() {                                                                              // 13\n    debug('IR:after');                                                                                           // 162\n    return this;                                                                                                 //\n  });                                                                                                            //\n  return Router.onStop(function() {                                                                              //\n    debug('IR:stop');                                                                                            // 166\n    self.functions.reset();                                                                                      // 166\n    return this;                                                                                                 //\n  });                                                                                                            //\n};                                                                                                               // 12\n                                                                                                                 //\nTemplate.__IronRouterProgress__.helpers({                                                                        // 2\n  data: function() {                                                                                             // 171\n    return Template.instance();                                                                                  //\n  },                                                                                                             //\n  template: function() {                                                                                         // 171\n    var ref;                                                                                                     // 174\n    if (!((ref = Router.current()) != null ? ref.lookupOption('progress') : void 0)) {                           // 174\n      return null;                                                                                               // 174\n    }                                                                                                            //\n    if (Template.instance().loading.get()) {                                                                     // 176\n      return '__IronRouterProgressDefault__';                                                                    //\n    } else {                                                                                                     //\n      return null;                                                                                               //\n    }                                                                                                            //\n  }                                                                                                              //\n});                                                                                                              //\n                                                                                                                 //\nTemplate.__IronRouterProgressDefault__.rendered = function() {                                                   // 2\n  return this.element = this.$('#iron-router-progress');                                                         //\n};                                                                                                               // 178\n                                                                                                                 //\nTemplate.__IronRouterProgressDefault__.helpers({                                                                 // 2\n  cssClass: function() {                                                                                         // 183\n    var classes;                                                                                                 // 184\n    classes = [];                                                                                                // 184\n    if (this.loading.get()) {                                                                                    // 186\n      classes.push('loading');                                                                                   // 186\n    }                                                                                                            //\n    if (this.spinner.get()) {                                                                                    // 187\n      classes.push('spinner');                                                                                   // 187\n    }                                                                                                            //\n    if (this.done.get()) {                                                                                       // 188\n      classes.push('done');                                                                                      // 188\n    }                                                                                                            //\n    return classes.join(' ');                                                                                    //\n  },                                                                                                             //\n  cssStyle: function() {                                                                                         // 183\n    var styles;                                                                                                  // 192\n    styles = [];                                                                                                 // 192\n    if (this.percent.get()) {                                                                                    // 194\n      styles.push(\"width:\" + (this.percent.get()) + \"%\");                                                        // 194\n    }                                                                                                            //\n    return styles.join(';');                                                                                     //\n  }                                                                                                              //\n});                                                                                                              //\n                                                                                                                 //\nTemplate.__IronRouterProgressDefault__.events({                                                                  // 2\n  'transitionend #iron-router-progress, webkitTransitionEnd #iron-router-progress, oTransitionEnd #iron-router-progress, otransitionend #iron-router-progress, MSTransitionEnd #iron-router-progress': function(e, template) {\n    var data;                                                                                                    // 206\n    if (e.originalEvent.pseudoElement === '' && e.originalEvent.propertyName === _.last(template.element.css('transition-property').split(', '))) {\n      debug('transitionend');                                                                                    // 207\n      data = Template.currentData();                                                                             // 207\n      data.done.set(false);                                                                                      // 207\n      data.loading.set(false);                                                                                   // 207\n      return data.percent.set(false);                                                                            //\n    }                                                                                                            //\n  }                                                                                                              //\n});                                                                                                              //\n                                                                                                                 //\nMeteor.startup(function() {                                                                                      // 2\n  var layout;                                                                                                    // 215\n  layout = new Iron.Layout({                                                                                     // 215\n    template: '__IronRouterProgress__'                                                                           // 216\n  });                                                                                                            //\n  return layout.insert({                                                                                         //\n    el: document.body                                                                                            // 218\n  });                                                                                                            //\n});                                                                                                              // 214\n                                                                                                                 //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['multiply:iron-router-progress'] = {};\n\n})();\n","servePath":"/packages/multiply_iron-router-progress.js","sourceMap":{"version":3,"sources":["/packages/multiply_iron-router-progress/template.progress.js","/packages/multiply_iron-router-progress/progress.coffee"],"names":[],"mappings":"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","file":"/packages/multiply_iron-router-progress.js","sourcesContent":["\nTemplate.__checkName(\"__IronRouterProgress__\");\nTemplate[\"__IronRouterProgress__\"] = new Template(\"Template.__IronRouterProgress__\", (function() {\n  var view = this;\n  return Blaze._TemplateWith(function() {\n    return {\n      template: Spacebars.call(view.lookup(\"template\")),\n      data: Spacebars.call(view.lookup(\"data\"))\n    };\n  }, function() {\n    return Spacebars.include(function() {\n      return Spacebars.call(Template.__dynamic);\n    });\n  });\n}));\n\nTemplate.__checkName(\"__IronRouterProgressDefault__\");\nTemplate[\"__IronRouterProgressDefault__\"] = new Template(\"Template.__IronRouterProgressDefault__\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"iron-router-progress\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"cssClass\"));\n    },\n    style: function() {\n      return Spacebars.mustache(view.lookup(\"cssStyle\"));\n    }\n  });\n}));\n","# Default progress options\nRouter.configure\n\tprogress        : true\n\tprogressDebug   : false\n\tprogressDelay   : false\n\tprogressSpinner : true\n\tprogressTick    : true\n\n# Used to debug the package, if progressDebug is true\ndebug = -> console.log.apply console, arguments if Router.current().lookupOption 'progressDebug'\n\nTemplate.__IronRouterProgress__.created = ->\n\tself = @\n\n\t@ticker  = false\n\t@delay   = false\n\t@started = false\n\t@loading = new ReactiveVar false\n\t@spinner = new ReactiveVar false\n\t@done    = new ReactiveVar false\n\t@percent = new ReactiveVar false\n\n\t@functions =\n\t\treset : (element) ->\n\t\t\tdebug 'Reset'\n\n\t\t\tself.functions.stop()\n\n\t\t\t# Reset our variables\n\t\t\tself.loading.set false\n\t\t\tself.done.set    false\n\t\t\tself.percent.set 0\n\t\t\tself.started =   false\n\n\t\t\telement.offsetWidth = element.offsetWidth if element\n\n\t\t\tself\n\n\t\tstart : (element) ->\n\t\t\tdebug 'Start'\n\n\t\t\t# Reset our progress\n\t\t\tself.functions.reset element\n\n\t\t\t# Update the spinner status, if it changed\n\t\t\tself.spinner.set Router.current().lookupOption('progressSpinner') or false\n\n\t\t\tself.loading.set true\n\n\t\t\t# If we have a delay, wait with the progress\n\t\t\tdelay = Router.current().lookupOption 'progressDelay'\n\t\t\tif delay > 0\n\t\t\t\tdebug 'Delayed'\n\t\t\t\tself.delay = Meteor.setTimeout ->\n\t\t\t\t\tself.started = true\n\t\t\t\t\tself.functions.progress()\n\t\t\t\t\tself.functions.tick()\n\t\t\t\t, delay\n\t\t\telse\n\t\t\t\tdebug 'Not delayed'\n\t\t\t\tself.started = true\n\t\t\t\tself.functions.progress()\n\t\t\t\tself.functions.tick()\n\n\t\t\tself\n\n\t\tprogress : (progress = false) ->\n\t\t\tdebug 'Progress'\n\n\t\t\t# XX We need a better random number generation here\n\t\t\tpercent    = self.percent.get()\n\t\t\tpercentNew = percent + if progress then progress else (100 - percent) * (Math.random() * 0.45 + 0.05) | 0\n\n\t\t\tif percentNew >= 100\n\t\t\t\tself.functions.done()\n\t\t\telse\n\t\t\t\tself.percent.set percentNew\n\t\t\t\tself.functions.tick()\n\n\t\t\tself\n\n\t\ttick : ->\n\t\t\tdebug 'Tick'\n\n\t\t\tif Router.current().lookupOption 'progressTick'\n\t\t\t\tdebug 'starting new ticker'\n\t\t\t\tif self.ticker\n\t\t\t\t\tMeteor.clearTimeout self.ticker\n\t\t\t\t\tself.ticker = false\n\n\t\t\t\tself.ticker = Meteor.setTimeout ->\n\t\t\t\t\tself.ticker = false\n\t\t\t\t\tself.functions.progress()\n\t\t\t\t, Math.random() * 750 + 750\n\t\t\telse\n\t\t\t\tdebug 'Not starting ticker'\n\n\t\t\tself\n\n\t\tdone : ->\n\t\t\tdebug 'Done'\n\n\t\t\tself.functions.stop()\n\n\t\t\tif not self.started\n\t\t\t\tself.functions.reset()\n\t\t\telse\n\t\t\t\t_.defer ->\n\t\t\t\t\tself.done.set true\n\t\t\t\tself.loading.set true\n\t\t\t\tself.percent.set 100\n\t\t\tself\n\n\t\tstop : ->\n\t\t\tdebug 'Stop'\n\n\t\t\t# Clear the timers, if we have any\n\t\t\tif self.ticker\n\t\t\t\tMeteor.clearTimeout self.ticker\n\t\t\t\tself.ticker = false\n\t\t\tif self.delay\n\t\t\t\tMeteor.clearTimeout self.delay\n\t\t\t\tself.delay = false\n\n\t\t\tself\n\n\tRouter.load ->\n\t\tdebug 'IR:load'\n\t\telement = self.find '*'\n\t\tself.functions.start element\n\n\t\t@next()\n\t\t@\n\n\tRouter.unload ->\n\t\tdebug 'IR:unload'\n\t\tself.functions.reset()\n\t\t@\n\n\tRouter.onRun ->\n\t\tdebug 'IR:run'\n\t\tself.loading.set true\n\t\t@next()\n\t\t@\n\n\tRouter.onRerun ->\n\t\tdebug 'IR:re-run'\n\t\t@next()\n\t\t@\n\n\tRouter.onBeforeAction ->\n\t\tdebug 'IR:before'\n\t\tif @ready()\n\t\t\tself.functions.done()\n\t\t\tself.functions.stop()\n\t\telse\n\t\t\tself.functions.progress()\n\t\t@next()\n\t\t@\n\n\tRouter.onAfterAction ->\n\t\tdebug 'IR:after'\n\t\t@\n\n\tRouter.onStop ->\n\t\tdebug 'IR:stop'\n\t\tself.functions.reset()\n\t\t@\n\nTemplate.__IronRouterProgress__.helpers\n\tdata     : -> Template.instance()\n\ttemplate : ->\n\t\t# If progress is disabled in general, don't show a template\n\t\treturn null if not Router.current()?.lookupOption 'progress'\n\n\t\tif Template.instance().loading.get() then '__IronRouterProgressDefault__' else null\n\nTemplate.__IronRouterProgressDefault__.rendered = ->\n\t# Used for the CSS reset\n\t@element = @$ '#iron-router-progress'\n\nTemplate.__IronRouterProgressDefault__.helpers\n\tcssClass : ->\n\t\tclasses = []\n\n\t\tclasses.push 'loading' if @loading.get()\n\t\tclasses.push 'spinner' if @spinner.get()\n\t\tclasses.push 'done'    if @done.get()\n\n\t\tclasses.join ' '\n\tcssStyle : ->\n\t\tstyles = []\n\t\t\n\t\tstyles.push \"width:#{@percent.get()}%\" if @percent.get()\n\n\t\tstyles.join ';'\n\nTemplate.__IronRouterProgressDefault__.events\n\t'transitionend #iron-router-progress, webkitTransitionEnd #iron-router-progress, oTransitionEnd #iron-router-progress, otransitionend #iron-router-progress, MSTransitionEnd #iron-router-progress' : (e, template) ->\n\t\t# Only reset, if this is the last transition, and that it's not a psuedo selector, such as `:before` and `:after`\n\t\t# Due to the open nature, of the CSS, I want people to be able to do whatever they like, and as such\n\t\t# simply expecting opacity to reach zero, or specific propertyName to execute won't suffice\n\t\t# A more elegant solution should be added, as not all browsers may support transition-property\n\t\t# witout their vendor prefixes\n\n\t\tif e.originalEvent.pseudoElement is '' and e.originalEvent.propertyName is _.last template.element.css('transition-property').split ', '\n\t\t\tdebug 'transitionend'\n\t\t\tdata = Template.currentData()\n\t\t\tdata.done.set    false\n\t\t\tdata.loading.set false\n\t\t\tdata.percent.set false\n\n# Prepare our DOM-element\nMeteor.startup ->\n\tlayout = new Iron.Layout\n\t\ttemplate : '__IronRouterProgress__'\n\tlayout.insert\n\t\tel : document.body\n"]}}]