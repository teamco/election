{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"Template.userData.events({\n    \"click button[rel='editUser']\": function (event, template) {\n\n        event.preventDefault();\n\n        var nextUrl = '/users/' + this._id,\n            currentUrl = Router.current().originalUrl;\n\n        if (currentUrl.indexOf(nextUrl) > -1) {\n            return Template.userData.__helpers.get('showModal')(this._id);\n        }\n\n        Router.go(nextUrl);\n    }\n});\n\n// This code only runs on the client\nTemplate.userData.helpers({\n    showModal: function (id) {\n        if (id) {\n            Meteor.defer(function () {\n                $('#editUserModal').modal();\n            });\n        }\n    },\n    hideModal: function () {\n        Meteor.defer(function () {\n            $('#editUserModal').modal(\"hide\");\n        });\n    },\n    allUsers: function () {\n        return Accounts.users.find().fetch();\n    },\n    isCurrentUser: isCurrentUser,\n    beforeRemove: function () {\n        return function (collection, _id) {\n            var user = collection.findOne(_id),\n                name = user.profile.name || user.profile.email,\n                scope = this;\n\n            BootstrapModalPrompt.prompt({\n                title: \"Delete user\",\n                content: 'Do you really want to remove user: ' + name + '?'\n            }, function (confirmed) {\n                if (confirmed) {\n                    scope.remove();\n                    if (isCurrentUser(_id)) {\n                        Meteor.logout();\n                    }\n                }\n            });\n        };\n    }\n});\n\nfunction isCurrentUser(_id) {\n    return _id === Meteor.userId();\n}\n\nMeteor.subscribe(\"allUsers\");","ast":null,"map":{"version":3,"sources":["/client/templates/users/users.js"],"names":[],"mappings":"AAAA,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;AACrB,kCAA8B,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE;;AAEvD,aAAK,CAAC,cAAc,EAAE,CAAC;;AAEvB,YAAI,OAAO,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG;YAC9B,UAAU,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC;;AAE9C,YAAI,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;AAClC,mBAAO,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACjE;;AAED,cAAM,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;KACtB;CACJ,CAAC,CAAC;;;AAGH,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC;AACtB,aAAS,EAAE,UAAU,EAAE,EAAE;AACrB,YAAI,EAAE,EAAE;AACJ,kBAAM,CAAC,KAAK,CAAC,YAAY;AACrB,iBAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,CAAC;aAC/B,CAAC,CAAC;SACN;KACJ;AACD,aAAS,EAAE,YAAY;AACnB,cAAM,CAAC,KAAK,CAAC,YAAY;AACrB,aAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SACrC,CAAC,CAAC;KACN;AACD,YAAQ,EAAE,YAAY;AAClB,eAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,CAAC;KACxC;AACD,iBAAa,EAAE,aAAa;AAC5B,gBAAY,EAAE,YAAY;AACtB,eAAO,UAAU,UAAU,EAAE,GAAG,EAAE;AAC9B,gBAAI,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC;gBAC9B,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK;gBAC9C,KAAK,GAAG,IAAI,CAAC;;AAEjB,gCAAoB,CAAC,MAAM,CAAC;AACxB,qBAAK,EAAE,aAAa;AACpB,uBAAO,EAAE,qCAAqC,GAAG,IAAI,GAAG,GAAG;aAC9D,EAAE,UAAU,SAAS,EAAE;AACpB,oBAAI,SAAS,EAAE;AACX,yBAAK,CAAC,MAAM,EAAE,CAAC;AACf,wBAAI,aAAa,CAAC,GAAG,CAAC,EAAE;AACpB,8BAAM,CAAC,MAAM,EAAE,CAAC;qBACnB;iBACJ;aACJ,CAAC,CAAC;SACN,CAAC;KACL;CACJ,CAAC,CAAC;;AAEH,SAAS,aAAa,CAAC,GAAG,EAAE;AACxB,WAAO,GAAG,KAAK,MAAM,CAAC,MAAM,EAAE,CAAC;CAClC;;AAED,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC","file":"/client/templates/users/users.js.map","sourcesContent":["Template.userData.events({\n    \"click button[rel='editUser']\": function (event, template) {\n\n        event.preventDefault();\n\n        var nextUrl = '/users/' + this._id,\n            currentUrl = Router.current().originalUrl;\n\n        if (currentUrl.indexOf(nextUrl) > -1) {\n            return Template.userData.__helpers.get('showModal')(this._id);\n        }\n\n        Router.go(nextUrl);\n    }\n});\n\n// This code only runs on the client\nTemplate.userData.helpers({\n    showModal: function (id) {\n        if (id) {\n            Meteor.defer(function () {\n                $('#editUserModal').modal();\n            });\n        }\n    },\n    hideModal: function () {\n        Meteor.defer(function () {\n            $('#editUserModal').modal(\"hide\");\n        });\n    },\n    allUsers: function () {\n        return Accounts.users.find().fetch();\n    },\n    isCurrentUser: isCurrentUser,\n    beforeRemove: function () {\n        return function (collection, _id) {\n            var user = collection.findOne(_id),\n                name = user.profile.name || user.profile.email,\n                scope = this;\n\n            BootstrapModalPrompt.prompt({\n                title: \"Delete user\",\n                content: 'Do you really want to remove user: ' + name + '?'\n            }, function (confirmed) {\n                if (confirmed) {\n                    scope.remove();\n                    if (isCurrentUser(_id)) {\n                        Meteor.logout();\n                    }\n                }\n            });\n        };\n    }\n});\n\nfunction isCurrentUser(_id) {\n    return _id === Meteor.userId();\n}\n\nMeteor.subscribe(\"allUsers\");"]},"hash":"57f658a2e416b3037ef63b3bc921c59edcb04f91"}
